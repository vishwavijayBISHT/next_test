"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var o,r=1,s=arguments.length;r<s;r++)for(var t in o=arguments[r])Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.destroyCookie=exports.setCookie=exports.parseCookies=void 0;var cookie=require("cookie"),setCookieParser=require("set-cookie-parser"),isBrowser=function(){return"undefined"!=typeof window};function hasSameProperties(e,o){var r=Object.getOwnPropertyNames(e),s=Object.getOwnPropertyNames(o);if(r.length!==s.length)return!1;for(var t=0;t<r.length;t++){var i=r[t];if(e[i]!==o[i])return!1}return!0}function areCookiesEqual(e,o){var r=e.sameSite===o.sameSite;return"string"==typeof e.sameSite&&"string"==typeof o.sameSite&&(r=e.sameSite.toLowerCase()===o.sameSite.toLowerCase()),hasSameProperties(__assign(__assign({},e),{sameSite:void 0}),__assign(__assign({},o),{sameSite:void 0}))&&r}function createCookie(e,o,r){var s=r.sameSite;!0===s&&(s="strict"),void 0!==s&&!1!==s||(s="lax");var t=__assign(__assign({},r),{sameSite:s});return delete t.encode,__assign({name:e,value:o},t)}function parseCookies(e,o){return e&&e.req&&e.req.headers&&e.req.headers.cookie?cookie.parse(e.req.headers.cookie,o):isBrowser()?cookie.parse(document.cookie,o):{}}function setCookie(e,o,r,s){if(e&&e.res&&e.res.getHeader&&e.res.setHeader){var t=e.res.getHeader("Set-Cookie")||[];"string"==typeof t&&(t=[t]),"number"==typeof t&&(t=[]);var i=setCookieParser.parse(t),a=[];i.forEach((function(e){areCookiesEqual(e,createCookie(o,r,s))||a.push(cookie.serialize(e.name,e.value,__assign({encode:function(e){return e}},e)))})),a.push(cookie.serialize(o,r,s)),e.res.finished||e.res.setHeader("Set-Cookie",a)}if(isBrowser()){if(s&&s.httpOnly)throw new Error("Can not set a httpOnly cookie in the browser.");document.cookie=cookie.serialize(o,r,s)}return{}}function destroyCookie(e,o,r){var s=__assign(__assign({},r||{}),{maxAge:-1});if(e&&e.res&&e.res.setHeader&&e.res.getHeader){var t=e.res.getHeader("Set-Cookie")||[];"string"==typeof t&&(t=[t]),"number"==typeof t&&(t=[]),t.push(cookie.serialize(o,"",s)),e.res.setHeader("Set-Cookie",t)}return isBrowser()&&(document.cookie=cookie.serialize(o,"",s)),{}}exports.parseCookies=parseCookies,exports.setCookie=setCookie,exports.destroyCookie=destroyCookie,exports.default={set:setCookie,get:parseCookies,destroy:destroyCookie};
//# sourceMappingURL=index.min.js.map