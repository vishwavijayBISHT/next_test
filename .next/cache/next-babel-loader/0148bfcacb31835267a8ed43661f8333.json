{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\TCZ-NISHU\\\\Desktop\\\\myprojects\\\\next-p\\\\components\\\\UserRoles.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { parseCookies } from \"nookies\"; // import baseUrl from \"../helpers/baseUrl\";\n\nfunction UserRoles() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState([]),\n      users = _useState[0],\n      setUsers = _useState[1];\n\n  var _parseCookies = parseCookies(),\n      token = _parseCookies.token;\n\n  useEffect(function () {\n    fetchUser();\n  }, []);\n\n  var fetchUser = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, res2;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"http://localhost:3000/api/user\", {\n                headers: {\n                  Authorization: token\n                }\n              });\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return res.json();\n\n            case 5:\n              res2 = _context.sent;\n              console.log(res2);\n              setUsers(res2);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchUser() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleRole = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_id, role) {\n      var res, res2, updatedUsers;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"http://localhost:3000/api/user\", {\n                method: \"PUT\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: token\n                },\n                body: JSON.stringify({\n                  _id: _id,\n                  role: role\n                })\n              });\n\n            case 2:\n              res = _context2.sent;\n              _context2.next = 5;\n              return res.json();\n\n            case 5:\n              res2 = _context2.sent;\n              console.log(res2); // setUsers(res2)\n\n              updatedUsers = users.map(function (user) {\n                if (user.role != res2.role && user.email == res2.email) {\n                  return res2;\n                } else {\n                  return user;\n                }\n              });\n              setUsers(updatedUsers);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleRole(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"User roles\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Role\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: users.map(function (item) {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n              onClick: function onClick() {\n                return handleRole(item._id, item.role);\n              },\n              children: item.role\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(UserRoles, \"JadZszbqna06PpJs9hMo7Hl/LOY=\");\n\n_c = UserRoles;\nexport default UserRoles;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserRoles\");","map":{"version":3,"sources":["C:/Users/TCZ-NISHU/Desktop/myprojects/next-p/components/UserRoles.js"],"names":["useState","useEffect","parseCookies","UserRoles","users","setUsers","token","fetchUser","fetch","headers","Authorization","res","json","res2","console","log","handleRole","_id","role","method","body","JSON","stringify","updatedUsers","map","user","email","item","name"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { parseCookies } from \"nookies\";\r\n// import baseUrl from \"../helpers/baseUrl\";\r\n\r\nfunction UserRoles() {\r\n  const [users, setUsers] = useState([]);\r\n  const { token } = parseCookies();\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, []);\r\n  const fetchUser = async () => {\r\n    const res = await fetch(`http://localhost:3000/api/user`, {\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    });\r\n    const res2 = await res.json();\r\n    console.log(res2);\r\n    setUsers(res2);\r\n  };\r\n\r\n  const handleRole = async (_id, role) => {\r\n    const res = await fetch(`http://localhost:3000/api/user`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: token,\r\n      },\r\n      body: JSON.stringify({\r\n        _id,\r\n        role,\r\n      }),\r\n    });\r\n    const res2 = await res.json();\r\n    console.log(res2);\r\n    // setUsers(res2)\r\n    const updatedUsers = users.map((user) => {\r\n      if (user.role != res2.role && user.email == res2.email) {\r\n        return res2;\r\n      } else {\r\n        return user;\r\n      }\r\n    });\r\n    setUsers(updatedUsers);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>User roles</h1>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Email</th>\r\n            <th>Role</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.map((item) => {\r\n            return (\r\n              <tr>\r\n                <td>{item.name}</td>\r\n                <td>{item.email}</td>\r\n                <td onClick={() => handleRole(item._id, item.role)}>\r\n                  {item.role}\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserRoles;\r\n"]},"metadata":{},"sourceType":"module"}