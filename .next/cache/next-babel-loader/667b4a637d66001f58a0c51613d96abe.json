{"ast":null,"code":"import initDB from \"../../helpers/initDb\";\nimport Product from \"../../models/Product\";\ninitDB();\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      await getall(req, res);\n      break;\n\n    case \"POST\":\n      await addprd(req, res);\n      break;\n  }\n});\n\nconst getall = async (req, res) => {\n  Product.find().then(products => {\n    res.status(200).json(products);\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst addprd = async (req, res) => {\n  const {\n    name,\n    price,\n    des,\n    media\n  } = req.body;\n\n  if (!name || !price || !des || !media) {\n    return res.status(422).json({\n      error: \"Please add all the fields\"\n    });\n  }\n\n  const product = await new Product({\n    name: name,\n    price: price,\n    description: des,\n    mediaUrl: media\n  }).save();\n  res.status(201).json(product);\n};","map":{"version":3,"sources":["C:/Users/TCZ-NISHU/Desktop/myprojects/next-p/pages/api/products.js"],"names":["initDB","Product","req","res","method","getall","addprd","find","then","products","status","json","catch","err","console","log","name","price","des","media","body","error","product","description","mediaUrl","save"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACAD,MAAM;AACN,gBAAe,OAAOE,GAAP,EAAYC,GAAZ,KAAoB;AACjC,UAAQD,GAAG,CAACE,MAAZ;AACE,SAAK,KAAL;AACE,YAAMC,MAAM,CAACH,GAAD,EAAMC,GAAN,CAAZ;AACA;;AACF,SAAK,MAAL;AACE,YAAMG,MAAM,CAACJ,GAAD,EAAMC,GAAN,CAAZ;AACA;AANJ;AAQD,CATD;;AAUA,MAAME,MAAM,GAAG,OAAOH,GAAP,EAAYC,GAAZ,KAAoB;AACjCF,EAAAA,OAAO,CAACM,IAAR,GACGC,IADH,CACSC,QAAD,IAAc;AAClBN,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,QAArB;AACD,GAHH,EAIGG,KAJH,CAIUC,GAAD,IAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GANH;AAOD,CARD;;AASA,MAAMP,MAAM,GAAG,OAAOJ,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AAAEa,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA,GAAf;AAAoBC,IAAAA;AAApB,MAA8BjB,GAAG,CAACkB,IAAxC;;AACA,MAAI,CAACJ,IAAD,IAAS,CAACC,KAAV,IAAmB,CAACC,GAApB,IAA2B,CAACC,KAAhC,EAAuC;AACrC,WAAOhB,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEU,MAAAA,KAAK,EAAE;AAAT,KAArB,CAAP;AACD;;AACD,QAAMC,OAAO,GAAG,MAAM,IAAIrB,OAAJ,CAAY;AAChCe,IAAAA,IAAI,EAAEA,IAD0B;AAEhCC,IAAAA,KAAK,EAAEA,KAFyB;AAGhCM,IAAAA,WAAW,EAAEL,GAHmB;AAIhCM,IAAAA,QAAQ,EAAEL;AAJsB,GAAZ,EAKnBM,IALmB,EAAtB;AAMAtB,EAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBW,OAArB;AACD,CAZD","sourcesContent":["import initDB from \"../../helpers/initDb\";\r\nimport Product from \"../../models/Product\";\r\ninitDB();\r\nexport default async (req, res) => {\r\n  switch (req.method) {\r\n    case \"GET\":\r\n      await getall(req, res);\r\n      break;\r\n    case \"POST\":\r\n      await addprd(req, res);\r\n      break;\r\n  }\r\n};\r\nconst getall = async (req, res) => {\r\n  Product.find()\r\n    .then((products) => {\r\n      res.status(200).json(products);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\nconst addprd = async (req, res) => {\r\n  const { name, price, des, media } = req.body;\r\n  if (!name || !price || !des || !media) {\r\n    return res.status(422).json({ error: \"Please add all the fields\" });\r\n  }\r\n  const product = await new Product({\r\n    name: name,\r\n    price: price,\r\n    description: des,\r\n    mediaUrl: media,\r\n  }).save();\r\n  res.status(201).json(product);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}